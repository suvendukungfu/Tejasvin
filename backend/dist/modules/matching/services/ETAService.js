"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ETAService = void 0;
class ETAService {
    /**
     * Predicts ETA in minutes based on distance and transport mode.
     */
    static predictArrival(distance_m, isProfessionalResponder = false) {
        const speedKmh = isProfessionalResponder
            ? this.AVG_CITY_SPEED_KMH * this.AMBULANCE_SPEED_MULTIPLIER
            : this.AVG_CITY_SPEED_KMH;
        const speedMs = (speedKmh * 1000) / 3600;
        const timeSeconds = distance_m / speedMs;
        // Add 2-minute buffer for "dispatch overhead"
        return Math.ceil((timeSeconds / 60) + 2);
    }
    /**
     * Provides a dynamic arrival window (min - max minutes)
     */
    static predictWindow(distance_m) {
        const baseEta = this.predictArrival(distance_m);
        return {
            min: Math.max(1, baseEta - 1),
            max: baseEta + 3
        };
    }
}
exports.ETAService = ETAService;
ETAService.AVG_CITY_SPEED_KMH = 30;
ETAService.AMBULANCE_SPEED_MULTIPLIER = 1.5;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRVRBU2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9tb2R1bGVzL21hdGNoaW5nL3NlcnZpY2VzL0VUQVNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsTUFBYSxVQUFVO0lBSW5COztPQUVHO0lBQ0ksTUFBTSxDQUFDLGNBQWMsQ0FBQyxVQUFrQixFQUFFLDBCQUFtQyxLQUFLO1FBQ3JGLE1BQU0sUUFBUSxHQUFHLHVCQUF1QjtZQUNwQyxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQywwQkFBMEI7WUFDM0QsQ0FBQyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztRQUU5QixNQUFNLE9BQU8sR0FBRyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDekMsTUFBTSxXQUFXLEdBQUcsVUFBVSxHQUFHLE9BQU8sQ0FBQztRQUV6Qyw4Q0FBOEM7UUFDOUMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRDs7T0FFRztJQUNJLE1BQU0sQ0FBQyxhQUFhLENBQUMsVUFBa0I7UUFDMUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNoRCxPQUFPO1lBQ0gsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE9BQU8sR0FBRyxDQUFDLENBQUM7WUFDN0IsR0FBRyxFQUFFLE9BQU8sR0FBRyxDQUFDO1NBQ25CLENBQUM7SUFDTixDQUFDOztBQTVCTCxnQ0E2QkM7QUE1QmtCLDZCQUFrQixHQUFHLEVBQUUsQ0FBQztBQUN4QixxQ0FBMEIsR0FBRyxHQUFHLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRVRBU2VydmljZSB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgQVZHX0NJVFlfU1BFRURfS01IID0gMzA7XG4gICAgcHJpdmF0ZSBzdGF0aWMgQU1CVUxBTkNFX1NQRUVEX01VTFRJUExJRVIgPSAxLjU7XG5cbiAgICAvKipcbiAgICAgKiBQcmVkaWN0cyBFVEEgaW4gbWludXRlcyBiYXNlZCBvbiBkaXN0YW5jZSBhbmQgdHJhbnNwb3J0IG1vZGUuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBwcmVkaWN0QXJyaXZhbChkaXN0YW5jZV9tOiBudW1iZXIsIGlzUHJvZmVzc2lvbmFsUmVzcG9uZGVyOiBib29sZWFuID0gZmFsc2UpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBzcGVlZEttaCA9IGlzUHJvZmVzc2lvbmFsUmVzcG9uZGVyXG4gICAgICAgICAgICA/IHRoaXMuQVZHX0NJVFlfU1BFRURfS01IICogdGhpcy5BTUJVTEFOQ0VfU1BFRURfTVVMVElQTElFUlxuICAgICAgICAgICAgOiB0aGlzLkFWR19DSVRZX1NQRUVEX0tNSDtcblxuICAgICAgICBjb25zdCBzcGVlZE1zID0gKHNwZWVkS21oICogMTAwMCkgLyAzNjAwO1xuICAgICAgICBjb25zdCB0aW1lU2Vjb25kcyA9IGRpc3RhbmNlX20gLyBzcGVlZE1zO1xuXG4gICAgICAgIC8vIEFkZCAyLW1pbnV0ZSBidWZmZXIgZm9yIFwiZGlzcGF0Y2ggb3ZlcmhlYWRcIlxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKCh0aW1lU2Vjb25kcyAvIDYwKSArIDIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGEgZHluYW1pYyBhcnJpdmFsIHdpbmRvdyAobWluIC0gbWF4IG1pbnV0ZXMpXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBwcmVkaWN0V2luZG93KGRpc3RhbmNlX206IG51bWJlcik6IHsgbWluOiBudW1iZXI7IG1heDogbnVtYmVyIH0ge1xuICAgICAgICBjb25zdCBiYXNlRXRhID0gdGhpcy5wcmVkaWN0QXJyaXZhbChkaXN0YW5jZV9tKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1pbjogTWF0aC5tYXgoMSwgYmFzZUV0YSAtIDEpLFxuICAgICAgICAgICAgbWF4OiBiYXNlRXRhICsgM1xuICAgICAgICB9O1xuICAgIH1cbn1cbiJdfQ==